<div class="lista-container">

  <div class="form-container">
    <h3>
      {{ esEdicion ? '‚úèÔ∏è Editando Libro (ID: ' + nuevoLibro.id + ')' : '‚ûï Agregar Nuevo Libro' }}
    </h3>
    
    <div class="form-grid">
      <div class="form-group">
        <label>T√≠tulo</label>
        <input type="text" placeholder="Ej: El Imperio Final" [(ngModel)]="nuevoLibro.titulo">
      </div>
      
      <div class="form-group">
        <label>Autor</label>
        <input type="text" placeholder="Ej: Brandon Sanderson" [(ngModel)]="nuevoLibro.autor">
      </div>

      <div class="form-group small">
        <label>Saga ID</label>
        <input type="number" [(ngModel)]="nuevoLibro.sagaId">
      </div>

      <div class="form-group small">
        <label>P√°ginas</label>
        <input type="number" [(ngModel)]="nuevoLibro.numeroPaginas">
      </div>

      <div class="form-group">
        <label>Fecha</label>
        <input type="date" [(ngModel)]="nuevoLibro.fechaEdicion">
      </div>

      <div class="form-group full-width">
        <label>Descripci√≥n</label>
        <textarea placeholder="Breve descripci√≥n..." [(ngModel)]="nuevoLibro.descripcion" rows="2"></textarea>
      </div>

      <div class="form-actions full-width">
        <button (click)="procesarFormulario()"
                class="btn"
                [ngClass]="esEdicion ? 'btn-primary' : 'btn-success'">
          {{ esEdicion ? 'Guardar Cambios' : 'Agregar Libro' }}
        </button>

        <button *ngIf="esEdicion"
                (click)="limpiarFormulario()"
                class="btn btn-secondary">
          Cancelar
        </button>
      </div>
    </div>
  </div>

  <hr class="divider">

  <h2>üìö Cat√°logo de Libros</h2>

  <div *ngIf="libros.length > 0; else noLibros" class="grid-libros">
    <div *ngFor="let libro of libros" class="card-libro">
      <div class="card-header">
        <h3>{{ libro.titulo }}</h3>
        <span class="badge">Saga: {{ libro.sagaId }}</span>
      </div>
      
      <div class="card-body">
        <p><strong>Autor:</strong> {{ libro.autor }}</p>
        <p><strong>P√°ginas:</strong> {{ libro.numeroPaginas }}</p>
        <p><strong>Publicado:</strong> {{ libro.fechaEdicion }}</p>
        <p class="descripcion">{{ libro.descripcion }}</p>
      </div>

      <div class="card-actions">
        <button (click)="cargarDatosParaEditar(libro)" class="btn btn-warning btn-sm">
          Editar
        </button>
        <button (click)="borrarLibro(libro.id)" class="btn btn-danger btn-sm">
          Eliminar
        </button>
      </div>
    </div>
  </div>

  <ng-template #noLibros>
    <p class="empty-msg">No se encontraron libros en la base de datos.</p>
  </ng-template>

</div>